---
- name: Create dirs
  file: dest=/apps/data/.headphones state=directory

- name: Clone repo
  git:  repo=https://github.com/rembo10/headphones.git
        dest=/apps/headphones

- name: Take ownership of apps
  file: dest=/apps owner={{ stack_user }} group={{ stack_user_group }} recurse=yes

- name: Add service
  copy: src=headphones.service
        dest=/etc/systemd/system/
        owner=root group=root mode=0644
        
- name:     Enable service
  service:  name=headphones.service enabled=yes state=started

- name:     Enable service
  service:  name=headphones.service state=stopped
  
- name: Configure init
  lineinfile:
    dest:   /apps/data/.headphones/headphones_config.ini
    regexp: "^http_host"
    line:   "http_host = 0.0.0.0"

- name:     Enable service
  service:  name=headphones.service enabled=yes state=started
  
